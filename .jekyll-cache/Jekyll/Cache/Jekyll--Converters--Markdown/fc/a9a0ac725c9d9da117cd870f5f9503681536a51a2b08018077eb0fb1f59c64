I"=<h2 id="overview">Overview</h2>
<p>Servlet is Java EE server driven technology to create web applications in java. The <code class="language-plaintext highlighter-rouge">javax.servlet</code> and <code class="language-plaintext highlighter-rouge">javax.servlet.http</code> packages provide interfaces and classes for writing our own servlets.</p>

<p>All servlets must implement the <code class="language-plaintext highlighter-rouge">javax.servlet.Servlet</code> interface, which defines servlet lifecycle methods. When implementing a generic service, we can extend the <code class="language-plaintext highlighter-rouge">GenericServlet</code> class provided with the Java Servlet API. The <code class="language-plaintext highlighter-rouge">HttpServlet</code> class provides methods, such as <code class="language-plaintext highlighter-rouge">doGet()</code> and <code class="language-plaintext highlighter-rouge">doPost()</code>, for handling HTTP-specific services.</p>

<p>Most of the times, web applications are accessed using HTTP protocol and thats why we mostly extend <code class="language-plaintext highlighter-rouge">HttpServlet</code> class.</p>

<h2 id="common-gateway-interfact-cgi-vs-serlet">Common Gateway Interfact (CGI) vs Serlet</h2>
<p>Before introduction of Java Servlet API, CGI technology was used to create dynamic web applications. CGI technology has many drawbacks such as creating separate process for each request, platform dependent code (C, C++), high memory usage and slow performance.</p>

<p>Servlet was introduced to overcome these drawbacks.</p>
<ul>
  <li>Servlets provide better performance that CGI in terms of processing time, memory utilization because servlets uses benefits of multithreading and for each request a new thread is created, that is faster than loading creating new Object for each request with CGI.</li>
  <li>Servlets and platform and system independent, the web application developed with Servlet can be run on any standard web container such as Tomcat, JBoss, Glassfish servers and on operating systems such as Windows, Linux, Unix, Solaris, Mac etc.</li>
  <li>Servlets are robust because container takes care of life cycle of servlet and we don’t need to worry about memory leaks, security, garbage collection etc.</li>
  <li>Servlets are maintainable and learning curve is small because all we need to take care is business logic for our application.</li>
</ul>

<h2 id="servlet-api-hierarchy">Servlet API Hierarchy</h2>
<p>The figure below shows servlet API hierachy.</p>
<center><img src="./assets/img/posts/20220712/Servlet-API-Hierarchy.png" /></center>

<ul>
  <li><code class="language-plaintext highlighter-rouge">javax.servlet.Servlet</code>
    <ul>
      <li><code class="language-plaintext highlighter-rouge">public abstract void init(ServletConfig paramServletConfig) throws ServletException</code> – This is the very important method that is invoked by servlet container to initialized the servlet and ServletConfig parameters. It is called only once in servlet lifecycle and make Servlet class different from normal java objects. We can extend this method in our servlet classes to initialize resources such as DB Connection, Socket connection etc.</li>
      <li><code class="language-plaintext highlighter-rouge">public abstract ServletConfig getServletConfig()</code> – This method returns a servlet config object, which contains any initialization parameters and startup configuration for this servlet. We can use this method to get the init parameters of servlet defines in deployment descriptor (web.xml) or through annotation in Servlet 3.</li>
      <li><code class="language-plaintext highlighter-rouge">public abstract void service(ServletRequest req, ServletResponse res) throws ServletException, IOException</code> – This method is responsible for processing the client request. Whenever servlet container receives any request, it creates a new thread and execute the service() method by passing request and response as argument. Servlets usually run in multi-threaded environment, so it’s developer responsibility to keep shared resources thread-safe using synchronization.</li>
      <li><code class="language-plaintext highlighter-rouge">public abstract String getServletInfo()</code> – This method returns string containing information about the servlet, such as its author, version, and copyright. The string returned should be plain text and can’t have markups.</li>
      <li><code class="language-plaintext highlighter-rouge">public abstract void destroy()</code> – This method can be called only once in servlet life cycle and used to close any open resources. This is like finalize method of a java class.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">javax.servlet.ServletConfig</code> We can provide servlet init parameters in web.xml file or through use of WebInitParam annotation.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">public abstract ServletContext getServletContext()</code> – This method returns the ServletContext object for the servlet.</li>
      <li><code class="language-plaintext highlighter-rouge">public abstract Enumeration&lt;String&gt; getInitParameterNames()</code> – This method returns the Enumeration&lt;String&gt; of name of init parameters defined for the servlet. If there are no init parameters defined, this method returns empty enumeration.</li>
      <li><code class="language-plaintext highlighter-rouge">public abstract String getInitParameter(String paramString)</code> – This method can be used to get the specific init parameter value by name. If parameter is not present with the name, it returns null.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">javax.servlet.ServletContext</code> We provide access to web application variables to the servlet. Ideally the name of this interface should be ApplicationContext because it’s for the application and not specific to any servlet.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">public abstract ServletContext getContext(String uripath)</code> – This method returns ServletContext object for a particular uripath or null if not available or not visible to the servlet.</li>
      <li><code class="language-plaintext highlighter-rouge">public abstract URL getResource(String path) throws MalformedURLException</code> – This method return URL object allowing access to any content resource requested. We can access items whether they reside on the local file system, a remote file system, a database, or a remote network site without knowing the specific details of how to obtain the resources.</li>
      <li><code class="language-plaintext highlighter-rouge">public abstract InputStream getResourceAsStream(String path)</code> – This method returns an input stream to the given resource path or null if not found.</li>
      <li><code class="language-plaintext highlighter-rouge">public abstract RequestDispatcher getRequestDispatcher(String urlpath)</code> – This method is mostly used to obtain a reference to another servlet. After obtaining a RequestDispatcher, the servlet programmer forward a request to the target component or include content from it.</li>
      <li><code class="language-plaintext highlighter-rouge">public abstract void log(String msg)</code> – This method is used to write given message string to the servlet log file.</li>
      <li><code class="language-plaintext highlighter-rouge">public abstract Object getAttribute(String name)</code> – Return the object attribute for the given name. We can get enumeration of all the attributes using <code class="language-plaintext highlighter-rouge">public abstract Enumeration&lt;String&gt; getAttributeNames() method</code>.</li>
      <li><code class="language-plaintext highlighter-rouge">public abstract void setAttribute(String paramString, Object paramObject)</code> – This method is used to set the attribute with application scope. The attribute will be accessible to all the other servlets having access to this ServletContext. We can remove an attribute using <code class="language-plaintext highlighter-rouge">public abstract void removeAttribute(String paramString)</code> method.</li>
      <li><code class="language-plaintext highlighter-rouge">String getInitParameter(String name)</code> – This method returns the String value for the init parameter defined with name in web.xml, returns null if parameter name doesn’t exist. We can use <code class="language-plaintext highlighter-rouge">Enumeration&lt;String&gt; getInitParameterNames()</code> to get enumeration of all the init parameter names.</li>
      <li><code class="language-plaintext highlighter-rouge">boolean setInitParameter(String paramString1, String paramString2)</code> – We can use this method to set init parameters to the application.</li>
    </ul>
  </li>
  <li>ServletRequest: provide client request information to the servlet. Servlet container creates ServletRequest object from client request and pass it to the servlet service() method for processing.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">Object getAttribute(String name)</code> – This method returns the value of named attribute as Object and null if it’s not present. We can use <code class="language-plaintext highlighter-rouge">getAttributeNames()</code> method to get the enumeration of attribute names for the request. This interface also provide methods for setting and removing attributes.</li>
      <li><code class="language-plaintext highlighter-rouge">String getParameter(String name)</code> – This method returns the request parameter as String. We can use <code class="language-plaintext highlighter-rouge">getParameterNames()</code> method to get the enumeration of parameter names for the request.</li>
      <li><code class="language-plaintext highlighter-rouge">String getServerName()</code> – returns the hostname of the server.</li>
      <li><code class="language-plaintext highlighter-rouge">int getServerPort()</code> – returns the port number of the server on which it’s listening.</li>
    </ul>
  </li>
  <li>ServletResponse: used by servlet in sending response to the client. Servlet container creates the ServletResponse object and pass it to servlet service() method and later use the response object to generate the HTML response for client.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">void addCookie(Cookie cookie)</code> – Used to add cookie to the response.</li>
      <li><code class="language-plaintext highlighter-rouge">void addHeader(String name, String value)</code> – used to add a response header with the given name and value.</li>
      <li><code class="language-plaintext highlighter-rouge">String encodeURL(java.lang.String url)</code> – encodes the specified URL by including the session ID in it, or, if encoding is not needed, returns the URL unchanged.</li>
      <li><code class="language-plaintext highlighter-rouge">String getHeader(String name)</code> – return the value for the specified header, or null if this header has not been set.</li>
      <li><code class="language-plaintext highlighter-rouge">void sendRedirect(String location)</code> – used to send a temporary redirect response to the client using the specified redirect location URL.</li>
      <li><code class="language-plaintext highlighter-rouge">void setStatus(int sc)</code> – used to set the status code for the response.</li>
    </ul>
  </li>
  <li>RequestDispatcher
RequestDispatcher interface is used to forward the request to another resource that can be HTML, JSP or another servlet in the same context. We can also use this to include the content of another resource to the response. This interface is used for servlet communication within the same context. We can get RequestDispatcher in a servlet using <code class="language-plaintext highlighter-rouge">ServletContext getRequestDispatcher(String path)</code> method. The path must begin with a / and is interpreted as relative to the current context root.
    <ul>
      <li><code class="language-plaintext highlighter-rouge">void forward(ServletRequest request, ServletResponse response)</code> – forwards the request from a servlet to another resource (servlet, JSP file, or HTML file) on the server.</li>
      <li><code class="language-plaintext highlighter-rouge">void include(ServletRequest request, ServletResponse response)</code> – includes the content of a resource (servlet, JSP page, HTML file) in the response.</li>
    </ul>
  </li>
  <li>GenericServlet: 
GenericServlet is an abstract class that implements Servlet, ServletConfig and Serializable interface. GenericServlet provide default implementation of all the Servlet life cycle methods and ServletConfig methods and makes our life easier when we extend this class, we need to override only the methods we want and rest of them we can work with the default implementation. Most of the methods defined in this class are only for easy access to common methods defined in Servlet and ServletConfig interfaces.</li>
</ul>

<p>One of the important method in GenericServlet class is no-argument init() method and we should override this method in our servlet program if we have to initialize some resources before processing any request from servlet.</p>
<ul>
  <li>HTTPServlet: 
HTTPServlet is an abstract class that extends GenericServlet and provides the base for creating HTTP based web applications. There are methods defined to be overridden by subclasses for different HTTP methods.
    <ul>
      <li>doGet(), for HTTP GET requests</li>
      <li>doPost(), for HTTP POST requests</li>
      <li>doPut(), for HTTP PUT requests</li>
      <li>doDelete(), for HTTP DELETE requests</li>
    </ul>
  </li>
</ul>

<h2 id="other">Other</h2>
<h3 id="servlet-attributes">Servlet Attributes</h3>
<p>Servlet attributes are used for inter-servlet communication, we can set, get and remove attributes in web application. There are three scopes for servlet attributes – request scope, session scope and application scope.</p>

<p>ServletRequest, HttpSession and ServletContext interfaces provide methods to get/set/remove attributes from request, session and application scope respectively.</p>

<p>Servlet attributes are different from init parameters defined in web.xml for ServletConfig or ServletContext.</p>
<h3 id="annotations">Annotations</h3>
<ul>
  <li>WebServlet – We can use this annotation with Servlet classes to define init parameters, loadOnStartup value, description and url patterns etc. At least one URL pattern MUST be declared in either the value or urlPattern attribute of the annotation, but not both. The class on which this annotation is declared MUST extend HttpServlet.</li>
  <li>WebInitParam – This annotation is used to define init parameters for servlet or filter, it contains name, value pair and we can provide description also. This annotation can be used within a WebFilter or WebServlet annotation.</li>
  <li>WebFilter – This annotation is used to declare a servlet filter. This annotation is processed by the container during deployment, the Filter class in which it is found will be created as per the configuration and applied to the URL patterns, Servlets and DispatcherTypes. The annotated class MUST implement javax.servlet.Filter interface.</li>
  <li>WebListener – The annotation used to declare a listener for various types of event, in a given web application context.</li>
</ul>
:ET